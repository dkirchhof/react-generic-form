{"version":3,"sources":["webpack:///./src/builder.tsx","webpack:///./src/index.tsx","webpack:///./src/input.tsx","webpack:///./src/validation.ts"],"names":[],"mappings":";;;;;;;;;;AAAa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,4CAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uCAAuC;AAC/D;AACA,wDAAwD,cAAc,+CAA+C,aAAa,+BAA+B;AACjK;;;;;;;;;;;;;AC1Ca;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,4CAAO;AAC7B,oBAAoB,mBAAO,CAAC,oDAAW;AACvC,kBAAkB,mBAAO,CAAC,oCAAW;AACrC,gBAAgB,mBAAO,CAAC,gCAAS;AACjC,qBAAqB,mBAAO,CAAC,yCAAc;AAC3C;AACA,YAAY,wCAAwC;AACpD,eAAe,sEAAsE;AACrF,gBAAgB,kDAAkD;AAClE,gBAAgB,sEAAsE;AACtF;AACA;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,gDAAgD,6BAA6B;AAC7E,yDAAyD,2DAA2D;AACpH,yDAAyD,yDAAyD;AAClH,yDAAyD,kEAAkE;AAC3H,yDAAyD,8CAA8C;AACvG,uCAAuC,iCAAiC;AACxE,2CAA2C,iCAAiC;AAC5E,2CAA2C,gBAAgB;AAC3D,2CAA2C,kBAAkB;AAC7D,sCAAsC,kCAAkC;AACxE;;;;;;;;;;;;;ACrCa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,4CAAO;AAC7B;AACA,+BAA+B,uBAAuB;AACtD,iDAAiD,eAAe,2BAA2B,oDAAoD,EAAE;AACjJ;;;;;;;;;;;;;ACNa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA,6HAA6H,UAAU;AACvI,0HAA0H,UAAU;AACpI;AACA;AACA,2HAA2H,SAAS;AACpI,wHAAwH,SAAS;AACjI;AACA;AACA;AACA,qGAAqG,gBAAgB","file":"main.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst createEmptyResult = (fieldOptions) => {\r\n    return Object.keys(fieldOptions).reduce((result, key) => {\r\n        const newField = {\r\n            name: key,\r\n            value: null,\r\n            errors: [],\r\n        };\r\n        return {\r\n            ...result,\r\n            [key]: newField,\r\n        };\r\n    }, {});\r\n};\r\nconst validate = (fieldOptions, data) => {\r\n    return Object.entries(fieldOptions).reduce((result, [key, field]) => {\r\n        const value = data.get(key);\r\n        const validators = field.validators;\r\n        const errors = validators && validators.map(validator => validator(value.toString())).filter(Boolean) || [];\r\n        const newField = {\r\n            name: key,\r\n            value,\r\n            errors\r\n        };\r\n        return {\r\n            ...result,\r\n            [key]: newField,\r\n        };\r\n    }, {});\r\n};\r\nconst submit = (fieldOptions, updateFields) => (event) => {\r\n    event.preventDefault();\r\n    const formData = new FormData(event.currentTarget);\r\n    const result = validate(fieldOptions, formData);\r\n    updateFields(result);\r\n    console.log(result);\r\n};\r\nexports.GenericForm = ({ children, fieldOptions, ...formProps }) => {\r\n    const [result, updateResult] = React.useState(createEmptyResult(fieldOptions));\r\n    return (React.createElement(\"form\", Object.assign({}, formProps, { onSubmit: submit(fieldOptions, updateResult) }), children({ fieldOptions, fields: result })));\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst react_dom_1 = require(\"react-dom\");\r\nconst builder_1 = require(\"./builder\");\r\nconst input_1 = require(\"./input\");\r\nconst validation_1 = require(\"./validation\");\r\nconst fieldOptions = {\r\n    email: { validators: [validation_1.simpleMail] },\r\n    lastname: { validators: [validation_1.minLength(2), validation_1.maxLength(20)] },\r\n    birthdate: { validators: [validation_1.isBefore(new Date())] },\r\n    firstname: { validators: [validation_1.minLength(2), validation_1.maxLength(20)] },\r\n    gender: {}\r\n};\r\nconst App = () => (React.createElement(React.Fragment, null,\r\n    React.createElement(\"style\", { dangerouslySetInnerHTML: { __html: `\r\n            form {\r\n                width: 200px;\r\n            }\r\n\r\n            input, select, textarea {\r\n                display: block;\r\n                box-sizing: border-box;\r\n                width: 100%;\r\n                margin-bottom: 1em;\r\n            }\r\n        ` } }),\r\n    React.createElement(builder_1.GenericForm, { fieldOptions: fieldOptions }, props => (React.createElement(React.Fragment, null,\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.firstname, placeholder: \"First name\" }),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.lastname, placeholder: \"Last name\" }),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.email, placeholder: \"Eg. example@email.com\" }),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.birthdate, type: \"date\" }),\r\n        React.createElement(\"select\", { name: props.fields.gender.name },\r\n            React.createElement(\"option\", { disabled: true, selected: true }, \"gender\"),\r\n            React.createElement(\"option\", { value: \"male\" }, \"male\"),\r\n            React.createElement(\"option\", { value: \"female\" }, \"female\")),\r\n        React.createElement(\"input\", { type: \"submit\", value: \"Submit\" }))))));\r\nreact_dom_1.render(React.createElement(App, null), document.getElementById(\"app\"));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\n;\r\nexports.InputWithValidator = ({ field, ...inputProps }) => (React.createElement(\"div\", null,\r\n    React.createElement(\"input\", Object.assign({}, inputProps, { name: field.name, style: { borderColor: field.errors.length ? \"red\" : \"gray\" } })),\r\n    React.createElement(\"ul\", null, field.errors.map(error => React.createElement(\"li\", null, error)))));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// export type ValidationFunctionWithParams = (...params: any[]) => ValidationFunction;\r\n// string\r\nexports.minLength = (minLength) => (value) => value.length >= minLength ? null : `value should be greater than or equal to ${minLength} characters.`;\r\nexports.maxLength = (maxLength) => (value) => value.length <= maxLength ? null : `value should be less than or equal to ${maxLength} characters.`;\r\nexports.simpleMail = (value) => value.match(/\\S+@\\S+\\.\\S+/) ? null : `please enter a valid email address`;\r\n// number\r\nexports.minValue = (minValue) => (value) => Number(value) >= minValue ? null : `value should be greater than or equal to ${minValue}.`;\r\nexports.maxValue = (maxValue) => (value) => Number(value) <= maxValue ? null : `value should be less than or equal to ${maxValue}.`;\r\nexports.isEven = (value) => Number(value) % 2 === 0 ? null : `value should be even.`;\r\nexports.isOdd = (value) => Number(value) % 2 !== 0 ? null : `value should be odd.`;\r\n// date\r\nexports.isBefore = (date) => (value) => new Date(value) < date ? null : `the date should be before ${date.toString()}`;\r\n"],"sourceRoot":""}