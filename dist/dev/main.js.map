{"version":3,"sources":["webpack:///./src/builder.tsx","webpack:///./src/index.tsx","webpack:///./src/input.tsx","webpack:///./src/validation.ts"],"names":[],"mappings":";;;;;;;;;;AAAa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,4CAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,wBAAwB,qDAAqD;AAC7E;AACA,wDAAwD,cAAc,6DAA6D,aAAa,+BAA+B;AAC/K;;;;;;;;;;;;;AChDa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,4CAAO;AAC7B,oBAAoB,mBAAO,CAAC,oDAAW;AACvC,kBAAkB,mBAAO,CAAC,oCAAW;AACrC,gBAAgB,mBAAO,CAAC,gCAAS;AACjC,qBAAqB,mBAAO,CAAC,yCAAc;AAC3C;AACA,YAAY,4CAA4C;AACxD,eAAe,sEAAsE;AACrF,gBAAgB,kDAAkD;AAClE,gBAAgB,sEAAsE;AACtF,cAAc;AACd,YAAY,8CAA8C;AAC1D,eAAe,0CAA0C;AACzD,sBAAsB,gDAAgD;AACtE;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,gDAAgD,wDAAwD;AACxG,yDAAyD,2DAA2D;AACpH,yDAAyD,yDAAyD;AAClH,yDAAyD,kEAAkE;AAC3H,yDAAyD,8CAA8C;AACvG;AACA,2CAA2C,uDAAuD;AAClG,+CAA+C,gCAAgC;AAC/E,+CAA+C,gBAAgB;AAC/D,+CAA+C,kBAAkB;AACjE;AACA,yDAAyD,0CAA0C;AACnG,yDAAyD,iDAAiD;AAC1G,yDAAyD,wDAAwD;AACjH,sCAAsC,kCAAkC;AACxE,sCAAsC,gCAAgC;AACtE;;;;;;;;;;;;;AC9Ca;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,4CAAO;AAC7B;AACA,+BAA+B,uBAAuB;AACtD,iDAAiD,eAAe,2BAA2B,oDAAoD,EAAE;AACjJ;;;;;;;;;;;;;ACNa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,mKAAmK,SAAS;AAC5K;AACA,iJAAiJ,UAAU;AAC3J,8IAA8I,UAAU;AACxJ;AACA;AACA,+IAA+I,SAAS;AACxJ,4IAA4I,SAAS;AACrJ;AACA;AACA;AACA,yHAAyH,gBAAgB;AACzI;AACA,+IAA+I,QAAQ","file":"main.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst createEmptyResult = (fieldOptions) => {\r\n    return Object.keys(fieldOptions).reduce((result, key) => {\r\n        const newField = {\r\n            name: key,\r\n            value: null,\r\n            errors: [],\r\n        };\r\n        return {\r\n            ...result,\r\n            [key]: newField,\r\n        };\r\n    }, {});\r\n};\r\nconst validate = (fieldOptions, data) => {\r\n    return Object.entries(fieldOptions).reduce((result, [key, field]) => {\r\n        const value = data.get(key);\r\n        const validators = field.validators;\r\n        const errors = validators && validators.map(validator => validator(data, key)).filter(Boolean) || [];\r\n        const newField = {\r\n            name: key,\r\n            value,\r\n            errors\r\n        };\r\n        return {\r\n            ...result,\r\n            [key]: newField,\r\n        };\r\n    }, {});\r\n};\r\nconst submit = (fieldOptions, updateFields, callback) => (event) => {\r\n    event.preventDefault();\r\n    const formData = new FormData(event.currentTarget);\r\n    const fields = validate(fieldOptions, formData);\r\n    updateFields(fields);\r\n    if (callback) {\r\n        callback({\r\n            fields,\r\n            formData,\r\n            isValid: Object.values(fields).every(field => !field.errors.length),\r\n        });\r\n    }\r\n};\r\nexports.GenericForm = ({ children, fieldOptions, onFormSubmit, ...formProps }) => {\r\n    const [result, updateResult] = React.useState(createEmptyResult(fieldOptions));\r\n    return (React.createElement(\"form\", Object.assign({}, formProps, { onSubmit: submit(fieldOptions, updateResult, onFormSubmit) }), children({ fieldOptions, fields: result })));\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst react_dom_1 = require(\"react-dom\");\r\nconst builder_1 = require(\"./builder\");\r\nconst input_1 = require(\"./input\");\r\nconst validation_1 = require(\"./validation\");\r\nconst fieldOptions = {\r\n    email: { validators: [(validation_1.simpleMail())] },\r\n    lastname: { validators: [validation_1.minLength(2), validation_1.maxLength(20)] },\r\n    birthdate: { validators: [validation_1.isBefore(new Date())] },\r\n    firstname: { validators: [validation_1.minLength(2), validation_1.maxLength(20)] },\r\n    gender: {},\r\n    image: { validators: [validation_1.maxFileSize(200)] },\r\n    password: { validators: [validation_1.minLength(6)] },\r\n    passwordConfirm: { validators: [validation_1.isSame(\"password\")] },\r\n};\r\nconst App = () => (React.createElement(React.Fragment, null,\r\n    React.createElement(\"style\", { dangerouslySetInnerHTML: { __html: `\r\n            form {\r\n                width: 200px;\r\n            }\r\n\r\n            input, select, textarea {\r\n                display: block;\r\n                box-sizing: border-box;\r\n                width: 100%;\r\n                margin-bottom: 1em;\r\n            }\r\n        ` } }),\r\n    React.createElement(builder_1.GenericForm, { fieldOptions: fieldOptions, onFormSubmit: console.log }, props => (React.createElement(React.Fragment, null,\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.firstname, placeholder: \"First name\" }),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.lastname, placeholder: \"Last name\" }),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.email, placeholder: \"Eg. example@email.com\" }),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.birthdate, type: \"date\" }),\r\n        React.createElement(\"div\", null,\r\n            React.createElement(\"select\", { name: props.fields.gender.name, defaultValue: \"null\" },\r\n                React.createElement(\"option\", { disabled: true, value: \"null\" }, \"gender\"),\r\n                React.createElement(\"option\", { value: \"male\" }, \"male\"),\r\n                React.createElement(\"option\", { value: \"female\" }, \"female\")),\r\n            React.createElement(\"ul\", null, props.fields.gender.errors.map(error => React.createElement(\"li\", null, error)))),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.image, type: \"file\" }),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.password, type: \"password\" }),\r\n        React.createElement(input_1.InputWithValidator, { field: props.fields.passwordConfirm, type: \"password\" }),\r\n        React.createElement(\"input\", { type: \"submit\", value: \"Submit\" }),\r\n        React.createElement(\"input\", { type: \"reset\", value: \"Reset\" }))))));\r\nreact_dom_1.render(React.createElement(App, null), document.getElementById(\"app\"));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\n;\r\nexports.InputWithValidator = ({ field, ...inputProps }) => (React.createElement(\"div\", null,\r\n    React.createElement(\"input\", Object.assign({}, inputProps, { name: field.name, style: { borderColor: field.errors.length ? \"red\" : \"gray\" } })),\r\n    React.createElement(\"ul\", null, field.errors.map(error => React.createElement(\"li\", null, error)))));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// export type ValidationFunctionWithParams = (...params: any[]) => ValidationFunction;\r\n// global\r\nexports.required = () => (formData, key) => formData.get(key) !== null ? null : `value shouldn't be null`;\r\nexports.isSame = (otherKey) => (formData, key) => formData.get(key) === formData.get(otherKey.toString()) ? null : `the value should be the same as the value of ${otherKey}`;\r\n// string\r\nexports.minLength = (minLength) => (formData, key) => formData.get(key).length >= minLength ? null : `value should be greater than or equal to ${minLength} characters.`;\r\nexports.maxLength = (maxLength) => (formData, key) => formData.get(key).length <= maxLength ? null : `value should be less than or equal to ${maxLength} characters.`;\r\nexports.simpleMail = () => (formData, key) => formData.get(key).match(/\\S+@\\S+\\.\\S+/) ? null : `please enter a valid email address`;\r\n// number\r\nexports.minValue = (minValue) => (formData, key) => Number(formData.get(key)) >= minValue ? null : `value should be greater than or equal to ${minValue}.`;\r\nexports.maxValue = (maxValue) => (formData, key) => Number(formData.get(key)) <= maxValue ? null : `value should be less than or equal to ${maxValue}.`;\r\nexports.isEven = (formData, key) => Number(formData.get(key)) % 2 === 0 ? null : `value should be even.`;\r\nexports.isOdd = (formData, key) => Number(formData.get(key)) % 2 !== 0 ? null : `value should be odd.`;\r\n// date\r\nexports.isBefore = (date) => (formData, key) => new Date(formData.get(key)) < date ? null : `the date should be before ${date.toString()}`;\r\n// file\r\nexports.maxFileSize = (maxSize) => (formData, key) => formData.get(key).size <= maxSize ? null : `the file size exceeded the maximum size of ${maxSize} bytes`;\r\n"],"sourceRoot":""}